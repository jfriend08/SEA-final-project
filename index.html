<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=640">

    <link rel="stylesheet" href="stylesheets/core.css" media="screen">
    <link rel="stylesheet" href="stylesheets/mobile.css" media="handheld, only screen and (max-device-width:640px)">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">

    <script type="text/javascript" src="javascripts/modernizr.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/headsmart.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $('#main_content').headsmart()
      })
    </script>
    <title>Sea-final-project by jfriend08</title>
  </head>

  <body>
    <a id="forkme_banner" href="https://github.com/jfriend08/SEA-final-project">View on GitHub</a>
    <div class="shell">

      <header>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <h1>Sea-final-project</h1>
            <h2></h2>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
      </header>

      <section id="downloads">
        <span class="inner">
          <a href="https://github.com/jfriend08/SEA-final-project/zipball/master" class="zip"><em>download</em> .ZIP</a><a href="https://github.com/jfriend08/SEA-final-project/tarball/master" class="tgz"><em>download</em> .TGZ</a>
        </span>
      </section>


      <span class="banner-fix"></span>


      <section id="main_content">
        <h1>
<a id="sea-final-project" class="anchor" href="#sea-final-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>SEA-final-project</h1>

<p>Building up movie seach engine plus customized recommendation system</p>

<h1>
<a id="constants-files" class="anchor" href="#constants-files" aria-hidden="true"><span class="octicon octicon-link"></span></a>Constants files:</h1>

<p><a href="https://drive.google.com/folderview?id=0BzG5zLRRrgKwfkFPVHE5ZUZ2WGVZM28wUXZqUzU5WmhuZ3ZFdURTMzNYNzJNeVN2T1dGWWM&amp;usp=sharing">google drive</a></p>

<h1>
<a id="working-procedure" class="anchor" href="#working-procedure" aria-hidden="true"><span class="octicon octicon-link"></span></a>Working Procedure</h1>

<h2>
<a id="1-split-data-into-many-partitions" class="anchor" href="#1-split-data-into-many-partitions" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. Split data into many partitions</h2>

<pre><code>#Note, the num of partitions should corresping to the num of backend works
#Default: (NumSuperFront, NumMaster, NumMovie, NumReview, NumIdx, NumDoc)= (1, 3, 3, 3, 3, 3)
python -m src.reformatter &lt;# of partitions for review&gt; &lt;# of partitions for movie&gt;
</code></pre>

<h2>
<a id="2-call-mapreduce-workers" class="anchor" href="#2-call-mapreduce-workers" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. call mapreduce workers</h2>

<pre><code>python -m mapreduce.workers
</code></pre>

<h2>
<a id="3-call-classification-workers" class="anchor" href="#3-call-classification-workers" aria-hidden="true"><span class="octicon octicon-link"></span></a>3. call classification workers</h2>

<pre><code>python -m classification.workers
</code></pre>

<h2>
<a id="4prepare-pickle-files-for-all-servers" class="anchor" href="#4prepare-pickle-files-for-all-servers" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.prepare pickle files for all servers</h2>

<pre><code>python -m Prepare
</code></pre>

<h2>
<a id="call-mapreduce-workers" class="anchor" href="#call-mapreduce-workers" aria-hidden="true"><span class="octicon octicon-link"></span></a>call mapreduce workers</h2>

<pre><code>python -m mapreduce.workers

</code></pre>

<h2>
<a id="call-classification-workers" class="anchor" href="#call-classification-workers" aria-hidden="true"><span class="octicon octicon-link"></span></a>call classification workers</h2>

<pre><code>python -m classification.workers

</code></pre>

<h2>
<a id="prepare-pickle-files-for-all-servers" class="anchor" href="#prepare-pickle-files-for-all-servers" aria-hidden="true"><span class="octicon octicon-link"></span></a>prepare pickle files for all servers</h2>

<pre><code>python -m Prepare

</code></pre>

<h2>
<a id="start-all-the-works" class="anchor" href="#start-all-the-works" aria-hidden="true"><span class="octicon octicon-link"></span></a>Start All the works</h2>

<p>Goal: 1. find ports, 2. fire up all servers</p>

<pre><code>python ./StartAll.py
</code></pre>

<h2>
<a id="6-fire-up-frontend-google-app-engine" class="anchor" href="#6-fire-up-frontend-google-app-engine" aria-hidden="true"><span class="octicon octicon-link"></span></a>6. Fire up frontend (google app engine)</h2>

<p><a href="https://cloud.google.com/sdk/#Quick_Start">https://cloud.google.com/sdk/#Quick_Start</a></p>

<pre><code>dev_appserver.py --host=localhost --port=8080 frontend
</code></pre>

<h1>
<a id="structure" class="anchor" href="#structure" aria-hidden="true"><span class="octicon octicon-link"></span></a>Structure:</h1>

<p>The structure of fired-uped HTTP servers are:</p>

<pre><code>                        --&gt; classifier_front(?)   --&gt; ?
User --&gt; SuperFront     --&gt; searchEng_front       --&gt; searchEng_worker (inclusing IndexServer*3, and DocumentServer*3)
                        --&gt; recom_front           --&gt; recom_worker (inclusing MovieServer*3, and ReviewServer*3)
</code></pre>

<h1>
<a id="recommendation-system" class="anchor" href="#recommendation-system" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recommendation System:</h1>

<h3>
<a id="goal-getting-the-user-id----check-user-log-to-get-review-history----check-movieserver-to-get-similar-critics----check-reviewserver-to-get-movies-sorted-by-weighted-rating" class="anchor" href="#goal-getting-the-user-id----check-user-log-to-get-review-history----check-movieserver-to-get-similar-critics----check-reviewserver-to-get-movies-sorted-by-weighted-rating" aria-hidden="true"><span class="octicon octicon-link"></span></a>Goal: getting the user ID --&gt; check user log to get review history --&gt; check MovieServer to get similar critics --&gt; check ReviewServer to get movies sorted by weighted rating</h3>

<h3>
<a id="stucture-and-usage" class="anchor" href="#stucture-and-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Stucture and Usage:</h3>

<pre><code>recom_front --&gt; MovieServer*3
            --&gt; ReviewServer*3

#recom_front api: 
#http://linserv2.cims.nyu.edu:46829/recom?user=UserID (e.g. http://linserv2.cims.nyu.edu:46829/recom?user=d0aa6e9b-676b-428f-9758-65e7c09b38a4)

#MovieServer api:
# http://linserv2.cims.nyu.edu:46831/movie?movieID=MovieIDs (e.g. http://linserv2.cims.nyu.edu:46831/movie?movieID=770802394+770882996+12900+13217+11705+770876740+770710325+771362322+533693794+348462568)

#ReviewServer api:
#http://linserv2.cims.nyu.edu:46834/review?critics=CRITICS (e.g. http://linserv2.cims.nyu.edu:46834/review?critics=Emanuel_Levy+Roger_Ebert)
</code></pre>

<p>Current UserLog is created by:</p>

<pre><code>python ./src/createFakeUserLog.py

#So it will create 20 reviews per user with random scoring on random movie. Total for 50 users with unique ID created.  
#saved at ../userLog/myUserBook
</code></pre>

<h1>
<a id="tomatocrawler" class="anchor" href="#tomatocrawler" aria-hidden="true"><span class="octicon octicon-link"></span></a>TomatoCrawler</h1>

<h2>
<a id="goal-to-fetch-rotten-tomato-website-and-save-the-info-properly" class="anchor" href="#goal-to-fetch-rotten-tomato-website-and-save-the-info-properly" aria-hidden="true"><span class="octicon octicon-link"></span></a>Goal: to fetch rotten tomato website and save the info properly</h2>

<p>Now we have:</p>

<ul>
<li>250 movie to search</li>
<li>1718 movieIDs returned</li>
</ul>

<div class="highlight highlight-python"><pre><span class="pl-c">#If you like tomatoCrawler to save Movie_fs, Review_fs, and IDs_fs to file system</span>
<span class="pl-k">from</span> src <span class="pl-k">import</span> tomatoCrawler
tomatoCrawler.main2FS()

<span class="pl-c">#Or! just ask tomatoCrawler to save Movie_dict, Review_fs, and IDs_fs to ./constants as pickle files</span>
tomatoCrawler.main2NormalDict()</pre></div>

<h1>
<a id="file-system-module-usage" class="anchor" href="#file-system-module-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>File System module Usage</h1>

<h2>
<a id="distributed-dictionary-object" class="anchor" href="#distributed-dictionary-object" aria-hidden="true"><span class="octicon octicon-link"></span></a>Distributed dictionary object</h2>

<div class="highlight highlight-python"><pre><span class="pl-k">from</span> fs <span class="pl-k">import</span> DisTable

<span class="pl-c">#Creating an object</span>
a <span class="pl-k">=</span> DisTable()
<span class="pl-c"># or</span>
b <span class="pl-k">=</span> DisTable({ <span class="pl-c1">1</span>: <span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>, <span class="pl-c1">2</span>: <span class="pl-s"><span class="pl-pds">'</span>b<span class="pl-pds">'</span></span>, <span class="pl-c1">3</span>: <span class="pl-s"><span class="pl-pds">'</span>c<span class="pl-pds">'</span></span>})

<span class="pl-c">#Set a key-value pair</span>
a[<span class="pl-c1">1</span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>
a[<span class="pl-c1">2</span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>b<span class="pl-pds">'</span></span>
<span class="pl-c">#Get a value with key</span>
a[<span class="pl-c1">1</span>]
<span class="pl-c">#returns 'a'</span>

<span class="pl-c">#Pop operation</span>
a.pop(<span class="pl-c1">1</span>)
<span class="pl-c">#returns 'a' and remove (1, 'a') from dictionary</span>

<span class="pl-c">#hasKey operation</span>
a.hasKey(<span class="pl-c1">2</span>)
<span class="pl-c">#returns True</span>
a.hasKey(<span class="pl-c1">1</span>)
<span class="pl-c">#returns False</span>

<span class="pl-c">#Length property</span>
a.length
<span class="pl-c">#returns 1</span>

<span class="pl-c">#Pretty print of dictionary</span>
<span class="pl-k">print</span> a
<span class="pl-c">#1</span>
<span class="pl-c">#   a</span>
<span class="pl-s"><span class="pl-pds">'''</span></span>
<span class="pl-s">key1</span>
<span class="pl-s">  value1</span>
<span class="pl-s">  value2</span>
<span class="pl-s">  ...</span>
<span class="pl-s">key2</span>
<span class="pl-s">  value1</span>
<span class="pl-s">  value2</span>
<span class="pl-s">  ...</span>
<span class="pl-s"><span class="pl-pds">'''</span></span></pre></div>

<h2>
<a id="distributed-list" class="anchor" href="#distributed-list" aria-hidden="true"><span class="octicon octicon-link"></span></a>Distributed List</h2>

<div class="highlight highlight-python"><pre><span class="pl-k">from</span> fs <span class="pl-k">import</span> DisList

<span class="pl-c">#Creating an object</span>
a <span class="pl-k">=</span> DisList()
<span class="pl-c"># or</span>
b <span class="pl-k">=</span> DisList([<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>])

<span class="pl-c">#Append/Extend a value into list</span>
a.append(<span class="pl-c1">1</span>)
a.append(<span class="pl-c1">2</span>)
a.extend(<span class="pl-c1">3</span>)
a.extend(<span class="pl-c1">4</span>)

<span class="pl-c">#Get a value given position</span>
a[<span class="pl-c1">0</span>]
<span class="pl-c">#returns 1</span>
a[<span class="pl-c1">1</span>]
<span class="pl-c">#returns 2</span>

<span class="pl-c">#Update value to given position</span>
a[<span class="pl-c1">1</span>] <span class="pl-k">=</span> <span class="pl-c1">3</span>
<span class="pl-k">print</span> a
<span class="pl-c">#[ 1 3 3 4 ]</span>

<span class="pl-c">#Remove value from list</span>
a.remove(<span class="pl-c1">1</span>)
<span class="pl-k">print</span> a
<span class="pl-c">#[ 3 3 4 ]</span>
a.remove(<span class="pl-c1">3</span>, <span class="pl-smi">globl</span><span class="pl-k">=</span><span class="pl-c1">True</span>)
<span class="pl-k">print</span> a
<span class="pl-c">#[ 4 ]</span>

<span class="pl-c">#Pop operation</span>
a.pop(<span class="pl-c1">1</span>)
<span class="pl-c">#returns 'a' and remove (1, 'a') from dictionary</span>

<span class="pl-c">#Length property</span>
a.length
<span class="pl-c">#returns 1</span></pre></div>
      </section>

      <footer>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <p>this project by <a href="https://github.com/jfriend08">jfriend08</a> can be found on <a href="https://github.com/jfriend08/SEA-final-project">GitHub</a></p>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
        <p>Generated with <a href="https://pages.github.com">GitHub Pages</a> using Merlot</p>
        <span class="octocat"></span>
      </footer>

    </div>

    
  </body>
</html>
